<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>è‡ªå®šä¹‰å¯¹è¯æ¡†æµ‹è¯•</title>
    <style>
      :root {
        --primary: #333;
        --primary-very-low: #ffffff;
        --primary-low: #f3f4f6;
        --primary-low-mid: #d1d5db;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        padding: 40px;
        max-width: 800px;
        margin: 0 auto;
        background: #f9fafb;
      }

      h1 {
        color: #1f2937;
        margin-bottom: 10px;
      }

      .description {
        color: #6b7280;
        margin-bottom: 30px;
      }

      .button-group {
        display: flex;
        gap: 12px;
        margin-bottom: 20px;
        flex-wrap: wrap;
      }

      button {
        padding: 12px 24px;
        background: #3b82f6;
        color: white;
        border: none;
        border-radius: 8px;
        font-size: 14px;
        font-weight: 500;
        cursor: pointer;
        transition: background 0.2s;
      }

      button:hover {
        background: #2563eb;
      }

      button:active {
        transform: scale(0.98);
      }

      .result {
        margin-top: 20px;
        padding: 16px;
        background: white;
        border-radius: 8px;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        min-height: 60px;
      }

      .result-title {
        font-weight: 600;
        color: #1f2937;
        margin-bottom: 8px;
      }

      .result-content {
        color: #4b5563;
        font-family: 'Courier New', monospace;
        background: #f9fafb;
        padding: 8px;
        border-radius: 4px;
        word-break: break-all;
      }

      .section {
        margin-bottom: 40px;
        background: white;
        padding: 24px;
        border-radius: 12px;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      }

      .section h2 {
        color: #1f2937;
        margin-top: 0;
        margin-bottom: 16px;
        font-size: 20px;
      }

      .section p {
        color: #6b7280;
        margin-bottom: 16px;
        line-height: 1.6;
      }
    </style>
  </head>
  <body>
    <h1>ğŸ¨ è‡ªå®šä¹‰å¯¹è¯æ¡†æµ‹è¯•é¡µé¢</h1>
    <p class="description">æµ‹è¯•è‡ªå®šä¹‰ alertã€confirm å’Œ prompt å¯¹è¯æ¡†åŠŸèƒ½</p>

    <div class="section">
      <h2>ğŸ“¢ Alert å¯¹è¯æ¡†</h2>
      <p>æ˜¾ç¤ºä¸€ä¸ªä¿¡æ¯æç¤ºæ¡†ï¼Œåªæœ‰ä¸€ä¸ª"ç¡®å®š"æŒ‰é’®ã€‚</p>
      <div class="button-group">
        <button onclick="testAlert1()">ç®€å•æç¤º</button>
        <button onclick="testAlert2()">é•¿æ–‡æœ¬æç¤º</button>
        <button onclick="testAlert3()">æˆåŠŸæ¶ˆæ¯</button>
      </div>
      <div class="result" id="alertResult">
        <div class="result-title">ç»“æœï¼š</div>
        <div class="result-content">ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®æµ‹è¯•</div>
      </div>
    </div>

    <div class="section">
      <h2>â“ Confirm å¯¹è¯æ¡†</h2>
      <p>æ˜¾ç¤ºä¸€ä¸ªç¡®è®¤å¯¹è¯æ¡†ï¼ŒåŒ…å«"å–æ¶ˆ"å’Œ"ç¡®å®š"æŒ‰é’®ã€‚</p>
      <div class="button-group">
        <button onclick="testConfirm1()">ç®€å•ç¡®è®¤</button>
        <button onclick="testConfirm2()">åˆ é™¤ç¡®è®¤</button>
        <button onclick="testConfirm3()">ä¸Šä¼ ç¡®è®¤</button>
      </div>
      <div class="result" id="confirmResult">
        <div class="result-title">ç»“æœï¼š</div>
        <div class="result-content">ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®æµ‹è¯•</div>
      </div>
    </div>

    <div class="section">
      <h2>âœï¸ Prompt å¯¹è¯æ¡†</h2>
      <p>æ˜¾ç¤ºä¸€ä¸ªè¾“å…¥å¯¹è¯æ¡†ï¼Œè®©ç”¨æˆ·è¾“å…¥æ–‡æœ¬ã€‚</p>
      <div class="button-group">
        <button onclick="testPrompt1()">è¾“å…¥åå­—</button>
        <button onclick="testPrompt2()">è¾“å…¥ç½‘å€ (å¸¦é»˜è®¤å€¼)</button>
        <button onclick="testPrompt3()">è¾“å…¥é‚®ç®±</button>
      </div>
      <div class="result" id="promptResult">
        <div class="result-title">ç»“æœï¼š</div>
        <div class="result-content">ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®æµ‹è¯•</div>
      </div>
    </div>

    <div class="section">
      <h2>ğŸ”„ è¿ç»­å¯¹è¯æ¡†</h2>
      <p>æµ‹è¯•è¿ç»­å¼¹å‡ºå¤šä¸ªå¯¹è¯æ¡†ã€‚</p>
      <div class="button-group">
        <button onclick="testSequential()">è¿ç»­æµ‹è¯•</button>
        <button onclick="testWorkflow()">å·¥ä½œæµç¨‹æ¨¡æ‹Ÿ</button>
      </div>
      <div class="result" id="sequentialResult">
        <div class="result-title">ç»“æœï¼š</div>
        <div class="result-content">ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®æµ‹è¯•</div>
      </div>
    </div>

    <script type="module">
      // æ³¨æ„ï¼šè¿™ä¸ªæµ‹è¯•é¡µé¢éœ€è¦åœ¨æ„å»ºåçš„ç¯å¢ƒä¸­è¿è¡Œ
      // æˆ–è€…éœ€è¦å°† dialog.ts ç¼–è¯‘åæ‰èƒ½ä½¿ç”¨

      // æ¨¡æ‹Ÿçš„å¯¹è¯æ¡†å‡½æ•°ï¼ˆå®é™…åº”è¯¥ä»æ„å»ºåçš„ä»£ç å¯¼å…¥ï¼‰
      import { customAlert, customConfirm, customPrompt } from './dialog.js'

      // Alert æµ‹è¯•
      window.testAlert1 = async () => {
        await customAlert('è¿™æ˜¯ä¸€ä¸ªç®€å•çš„æç¤ºæ¶ˆæ¯ï¼')
        document.getElementById('alertResult').querySelector('.result-content').textContent =
          'ç”¨æˆ·ç‚¹å‡»äº†ç¡®å®š'
      }

      window.testAlert2 = async () => {
        await customAlert(
          'è¿™æ˜¯ä¸€ä¸ªå¾ˆé•¿å¾ˆé•¿çš„æç¤ºæ¶ˆæ¯ï¼Œç”¨æ¥æµ‹è¯•è‡ªåŠ¨æ¢è¡ŒåŠŸèƒ½ã€‚å½“æ¶ˆæ¯å†…å®¹è¶…è¿‡å¯¹è¯æ¡†å®½åº¦æ—¶ï¼Œåº”è¯¥èƒ½å¤Ÿæ­£ç¡®åœ°æ¢è¡Œæ˜¾ç¤ºï¼Œè€Œä¸ä¼šè¶…å‡ºå¯¹è¯æ¡†è¾¹ç•Œã€‚'
        )
        document.getElementById('alertResult').querySelector('.result-content').textContent =
          'ç”¨æˆ·ç‚¹å‡»äº†ç¡®å®š'
      }

      window.testAlert3 = async () => {
        await customAlert('âœ… æ“ä½œæˆåŠŸï¼æ‚¨çš„æ›´æ”¹å·²ä¿å­˜ã€‚')
        document.getElementById('alertResult').querySelector('.result-content').textContent =
          'ç”¨æˆ·ç‚¹å‡»äº†ç¡®å®š'
      }

      // Confirm æµ‹è¯•
      window.testConfirm1 = async () => {
        const result = await customConfirm('æ‚¨ç¡®å®šè¦ç»§ç»­å—ï¼Ÿ')
        document.getElementById('confirmResult').querySelector('.result-content').textContent =
          `ç”¨æˆ·é€‰æ‹©äº†ï¼š${result ? 'ç¡®å®š' : 'å–æ¶ˆ'}`
      }

      window.testConfirm2 = async () => {
        const result = await customConfirm('âš ï¸ ç¡®å®šè¦åˆ é™¤è¿™ä¸ªé¡¹ç›®å—ï¼Ÿæ­¤æ“ä½œæ— æ³•æ’¤é”€ã€‚')
        document.getElementById('confirmResult').querySelector('.result-content').textContent =
          `ç”¨æˆ·é€‰æ‹©äº†ï¼š${result ? 'ç¡®å®šåˆ é™¤' : 'å–æ¶ˆåˆ é™¤'}`
      }

      window.testConfirm3 = async () => {
        const result = await customConfirm(
          'å‘ç° 5 ä¸ªå›¾ç‰‡å·²å­˜åœ¨äº markdown æ–‡æœ¬ä¸­ï¼Œå°†è¢«è·³è¿‡ã€‚æ˜¯å¦ç»§ç»­ä¸Šä¼ å‰©ä½™ 10 ä¸ªå›¾ç‰‡ï¼Ÿ'
        )
        document.getElementById('confirmResult').querySelector('.result-content').textContent =
          `ç”¨æˆ·é€‰æ‹©äº†ï¼š${result ? 'ç»§ç»­ä¸Šä¼ ' : 'å–æ¶ˆä¸Šä¼ '}`
      }

      // Prompt æµ‹è¯•
      window.testPrompt1 = async () => {
        const result = await customPrompt('è¯·è¾“å…¥æ‚¨çš„åå­—ï¼š')
        document.getElementById('promptResult').querySelector('.result-content').textContent =
          result !== null ? `ç”¨æˆ·è¾“å…¥äº†: "${result}"` : 'ç”¨æˆ·å–æ¶ˆäº†è¾“å…¥'
      }

      window.testPrompt2 = async () => {
        const result = await customPrompt('è¯·è¾“å…¥ç½‘å€ï¼š', 'https://example.com')
        document.getElementById('promptResult').querySelector('.result-content').textContent =
          result !== null ? `ç”¨æˆ·è¾“å…¥äº†: "${result}"` : 'ç”¨æˆ·å–æ¶ˆäº†è¾“å…¥'
      }

      window.testPrompt3 = async () => {
        const result = await customPrompt('è¯·è¾“å…¥æ‚¨çš„ç”µå­é‚®ç®±ï¼š', 'user@example.com')
        document.getElementById('promptResult').querySelector('.result-content').textContent =
          result !== null ? `ç”¨æˆ·è¾“å…¥äº†: "${result}"` : 'ç”¨æˆ·å–æ¶ˆäº†è¾“å…¥'
      }

      // è¿ç»­æµ‹è¯•
      window.testSequential = async () => {
        const resultEl = document
          .getElementById('sequentialResult')
          .querySelector('.result-content')
        resultEl.textContent = 'å¼€å§‹æµ‹è¯•...'

        await customAlert('è¿™æ˜¯ç¬¬ä¸€ä¸ªå¯¹è¯æ¡†')
        resultEl.textContent = 'ç¬¬ä¸€ä¸ªå¯¹è¯æ¡†å·²ç¡®è®¤...'

        const confirmed = await customConfirm('è¿™æ˜¯ç¬¬äºŒä¸ªå¯¹è¯æ¡†ï¼Œç»§ç»­å—ï¼Ÿ')
        if (confirmed) {
          resultEl.textContent = 'ç¬¬äºŒä¸ªå¯¹è¯æ¡†å·²ç¡®è®¤...'
          const input = await customPrompt('è¿™æ˜¯ç¬¬ä¸‰ä¸ªå¯¹è¯æ¡†ï¼Œè¾“å…¥ç‚¹ä»€ä¹ˆï¼š')
          resultEl.textContent = `æµ‹è¯•å®Œæˆï¼ç”¨æˆ·è¾“å…¥äº†ï¼š"${input}"`
        } else {
          resultEl.textContent = 'æµ‹è¯•è¢«å–æ¶ˆ'
        }
      }

      window.testWorkflow = async () => {
        const resultEl = document
          .getElementById('sequentialResult')
          .querySelector('.result-content')
        resultEl.textContent = 'å¼€å§‹å·¥ä½œæµç¨‹...'

        // æ­¥éª¤ 1: è·å–ç”¨æˆ·å
        const username = await customPrompt('è¯·è¾“å…¥ç”¨æˆ·åï¼š', 'admin')
        if (!username) {
          resultEl.textContent = 'å·¥ä½œæµç¨‹å·²å–æ¶ˆ'
          return
        }

        // æ­¥éª¤ 2: ç¡®è®¤æ“ä½œ
        const confirmed = await customConfirm(`ç¡®è®¤è¦ä»¥ "${username}" èº«ä»½æ‰§è¡Œæ“ä½œå—ï¼Ÿ`)
        if (!confirmed) {
          resultEl.textContent = 'å·¥ä½œæµç¨‹å·²å–æ¶ˆ'
          return
        }

        // æ­¥éª¤ 3: å®Œæˆæç¤º
        await customAlert(`âœ… æ“ä½œæˆåŠŸï¼æ¬¢è¿æ‚¨ï¼Œ${username}ï¼`)
        resultEl.textContent = `å·¥ä½œæµç¨‹å®Œæˆï¼ç”¨æˆ·ï¼š${username}`
      }
    </script>
  </body>
</html>
